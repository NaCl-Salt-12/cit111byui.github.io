<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>W09 Teaching Notes</title>
    <link rel="stylesheet" type="text/css" href="notes.css">
  </head>
  <body>


<p><strong style="font-family: sans-serif; font-size: 1rem;">Note:</strong><span style="font-family: sans-serif; font-size: 1rem;"> The weekly Teaching Notes only identify week-specific considerations. Please refer to the </span><a style="font-family: sans-serif; font-size: 1rem;" title="General Teaching Notes" href="https://byui.instructure.com/courses/1521/pages/general-teaching-notes" target="_blank" rel="noopener" data-api-endpoint="https://byui.instructure.com/api/v1/courses/1521/pages/general-teaching-notes" data-api-returntype="Page">General Teaching Notes</a><span style="font-family: sans-serif; font-size: 1rem;"> for repeating course facilitation expectations.</span></p>
<div class="objectives">
<h2>Week 09 Outcomes</h2>
<ul>
<li>Create multiple tables queries</li>
<li>Code queries with inner joins</li>
<li>Explain the difference between inner and outer joins</li>
</ul>
</div>
<div class="beforeTheWeekBegins">
<h2>Before the Week Begins</h2>
<ul>
<li>Students will go over preparation materials and complete the preparation check before the first class of the week.</li>
<li>Consider reviewing the teaching tips and suggestions in the CIT111 - W09 Course Group discussion <a href="https://byui.instructure.com/courses/70298/discussion_topics/1457734" data-api-endpoint="https://byui.instructure.com/api/v1/courses/70298/discussion_topics/1457734" data-api-returntype="Discussion">https://byui.instructure.com/courses/70298/discussion_topics/1457734</a>.</li>
</ul>
</div>
<div class="duringTheWeek">
<h2>During the Week</h2>
<ul>
<li>First of the week:
<ul>
<li>The students should have completed the preparation materials and check before the beginning of the first class of the week and be ready for learning, activities, and discussions.</li>
</ul>
</li>
</ul>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (W09 - Joins Practice)</p>
<ul>
<li style="list-style-type: none;">
<ul>
<li>Demonstrate, explain and have them follow along with different queries using joins. Here are some examples you could use:</li>
<pre>
USE v_art;

-- A list of all the artists with each of their art works (can demonstrate alias's and USING if you'd like here, but realize the USING contruct isn't universal for all RDBMS and there are some limitations with USING. That is why we teach with ON not USING) 
SELECT fname, lname, title
FROM artist JOIN artwork
	ON artist.artist_id = artwork.artist_id;

-- A list of all the artists even if they don't have any artwork
-- in other words: all artist and only related artwork
SELECT fname, lname, title
FROM artist LEFT JOIN artwork
	ON artist.artist_id = artwork.artist_id;

-- Show them art.ceiwebdev.com

-- What if I only want Leonardo diVinci's?
SELECT fname, lname, title, artfile, period, arttype, artlocation
FROM artist JOIN artwork
	ON artist.artist_id = artwork.artist_id
WHERE lname = 'da Vinci';

-- On their own: A list of all the artwork from artist in the 
-- Netherlands
SELECT title, artfile, period, arttype, artlocation
FROM artwork JOIN artist
	ON artist.artist_id = artwork.artist_id
WHERE country = "Netherlands";

USE bike;

SELECT * FROM category;

SELECT * FROM product;

SELECT product_name, category_name, list_price
FROM product JOIN category
	ON product.category_id = category.category_id;
    
-- I also want the brand as well, this involves 3 tables
SELECT product_name, category_name, brand_name, list_price
FROM product JOIN category
	ON product.category_id = category.category_id
    JOIN brand
    ON product.brand_id = brand.brand_id;
    
-- On their own: All children category bikes
SELECT product_id, product_name
FROM product JOIN category
	ON product.category_id = category.category_id
WHERE category_name = "Children Bicycles";

SELECT * FROM store;
SELECT * FROM staff;

-- On their own: All staff at Rowlett Bikes Store
SELECT first_name, last_name
FROM staff JOIN store
	ON staff.store_id = store.store_id
WHERE store_name = "Rowlett Bikes";

-- All products ordered with price and quantity, shows need for grouping later
SELECT product_name, cust_order_id, product.list_price, quantity
FROM product JOIN cust_order_item
	ON product.product_id = cust_order_item.product_id
ORDER BY cust_order_id;

SELECT * FROM cust_order;

-- All products ordered in March 2016
SELECT product_name, cust_order.cust_order_id, product.list_price, quantity, order_date
FROM product JOIN cust_order_item
	ON product.product_id = cust_order_item.product_id
	JOIN cust_order
    ON cust_order.cust_order_id = cust_order_item.cust_order_id
WHERE order_date BETWEEN '2016-03-01' AND '2016-03-31';

-- More joins (table aliases, more practice with outer joins)

-- show table aliases, AS is an optional keyword with column aliases
-- and with table aliases
SELECT subscriberLastName AS lastname, subscriberFirstName, subscriptionStartDate
FROM subscriber sr
	JOIN subscription sn -- add LEFT OUTER later to review OUTER JOINS Walter shows
		ON sr.subscriberKey = sn.subscriberKey
ORDER BY lastname;

-- reverse the two table's order and show how it's the same with RIGHT
-- There is one magazine with no subscribers. How would you show all magazines
-- and only the related data of the subscription table? (On their own)
-- list out magazineName, magazinePrice, and subscriptionStartDate (use table aliases)
SELECT magazineName, magazinePrice, subscriptionStartDate
FROM magazine m LEFT JOIN subscription s
	ON m.magazineKey = s.magazineKey;
    
-- Now add to the query above the 3rd table of subscribers so you can see
-- their last name (demonstrates using 3 tables in a OUTER JOIN) (On their Own)
-- It should still show the one magazine with  date and name as null
SELECT magazineName, magazinePrice, subscriptionStartDate, subscriberLastName
FROM magazine m 
	LEFT JOIN subscription s
	ON m.magazineKey = s.magazineKey
    LEFT JOIN subscriber sr
    ON s.subscriberKey = sr.subscriberKey;
    
-- need the second JOIN as LEFT otherwise you don't get all the results from 
-- the first join that includes the one magazine with no relations
-- draw a Venn diagram to explain with 3 circles. 

-- Demonstrate a FULL OUTER JOIN simulated with UNION in MySQL
-- Copy the LEFT OUTER JOIN above and UNION it to Same with ithe RIGHT JOINS
SELECT magazineName, magazinePrice, subscriptionStartDate, subscriberLastName
FROM magazine m 
	LEFT JOIN subscription s
	ON m.magazineKey = s.magazineKey
    LEFT JOIN subscriber sr
    ON s.subscriberKey = sr.subscriberKey
UNION
SELECT magazineName, magazinePrice, subscriptionStartDate, subscriberLastName
FROM magazine m 
	RIGHT JOIN subscription s
	ON m.magazineKey = s.magazineKey
    RIGHT JOIN subscriber sr
    ON s.subscriberKey = sr.subscriberKey;
    
-- show Venn diagrams with two 3 part tables coming together and shading everything.

</pre>
<li>Remind students of the quiz the second class of the week.&nbsp;</li>
</ul>
</li>
<br>
<li>Mid-week
<ul>
<li>Have them complete their quiz by themselves once and then with others for the second attempt. The discussions and debates during the second attempt as a group is a great 'teach one another' activity. The two scores will be averaged for their final quiz score.</li>
</ul>
</li>
</ul>
<p style="padding-left: 40px;">(W09 - Joins Activity):</p>
<ul>
<li style="list-style-type: none;">
<ul>
<li>There may be time for a short activity this week. Joins take a lot of time to understand.&nbsp; Usually I don't get through all the joins in the practice activity and I finish them here. I just go over the 'More joins'-- the last 4 queries in the practice activity and really try and help them understand them.</li>
</ul>
</li>
</ul>
<ul>
<li style="list-style-type: none;"></li>
<li>End of the Week<br />
<ul>
<li style="list-style-type: none;"></li>
<li>The homework due Saturday will be
<ul>
<li>Creating a number of queries using joins.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="gradingFeedback">
<h2>Grading/Feedback</h2>
<ul>
<li><strong>Instructor:</strong> The check and quiz are auto-graded. The homework will checking their join queries and making sure they get the proper result set. </li>
	<li>Here is the key:</li>
<pre>
USE v_art;

/* 1.
 when you visit art.ceiwebdev.com and you search by Period/Style
 and choose Impressionism, you get two resulting images
 What query would allow the user to use the term Impressionism and 
 bring up the images of 'Woman in the Garden' and 'Irises'
 no join needed */

SELECT artfile
FROM artwork
WHERE period = "Impressionism";

/* 2.
 when you visit art.ceiwebdev.com and you click on Subject and type in 
 flower, you get three pieces of art that had the keyword flower related to them
 What query would have allowed you to get the results of listing those
 images by file name? (and what if the keyword is flowers 
 and they type flower?) */

SELECT artfile
FROM artwork JOIN artwork_keyword
	ON artwork.artwork_id = artwork_keyword.artwork_id
    JOIN keyword
    ON artwork_keyword.keyword_id = keyword.keyword_id
WHERE keyword LIKE "%flower%";

/* 3.
 list all artists from the artist table but only the related artwork
 from the artwork table. We need the first and last name and artwork title */

SELECT fname, lname, title
FROM artist LEFT JOIN artwork	
	ON artist.artist_id = artwork.artist_id;

USE magazine; 

/* 4. 
 list all subscriptions ordered with magazine name, 
 last and first name and sort alphabetically by magazine name */

SELECT magazineName, subscriberLastName, subscriberFirstName
FROM magazine JOIN subscription
	ON magazine.magazineKey = subscription.magazineKey
    JOIN subscriber
    ON subscriber.subscriberKey = subscription.subscriberKey
ORDER BY magazineName;

/* 5.
 list all magazine names that Samantha Sanders subscribes to */

SELECT magazineName
FROM magazine JOIN subscription	
	ON magazine.magazineKey = subscription.magazineKey
    JOIN subscriber
    ON subscription.subscriberKey = subscriber.subscriberKey
WHERE subscriberLastName = "Sanders" AND subscriberFirstName = "Samantha";

USE employees;

SELECT * FROM employees.salaries;

-- 6. a list of all employees in the Customer Service department

SELECT first_name, last_name
FROM employees e JOIN dept_emp de
	ON e.emp_no = de.emp_no
    JOIN departments d
    ON de.dept_no = d.dept_no
WHERE dept_name = "Customer Service"
ORDER BY last_name
LIMIT 5;

-- 7. find out the current salary and department of Berni Genin. You can use ORDER BY and LIMIT to get just the most recent salary.

SELECT first_name, last_name, dept_name, salary, s.from_date
FROM departments d JOIN dept_emp de
	ON d.dept_no = de.dept_no
    JOIN employees e
    ON de.emp_no = e.emp_no
    JOIN salaries s
    ON e.emp_no = s.emp_no
WHERE first_name = "Berni" AND last_name = "Genin"
ORDER BY from_date DESC
LIMIT 1;
</pre>
</ul>
</div>
<div class="lookingAhead">
<h2>Looking Ahead</h2>
<ul>
<li>Remind students that they have readings and videos to watch and a check to complete before the first class next week to be prepared for the next week.</li>
</ul>
</div>
</body>
</html>
